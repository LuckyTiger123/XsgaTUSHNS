
我们团队主要使用特征工程+lightgbm树模型的方案，达到初赛榜单0.86+的成绩。
具体方案介绍如下，主要通过介绍各部分代码意图来简述方案。

1. 000_prepare_data.py
将原始的npy数据转化为dataFrame的格式，同时区分出训练集与测试集
将用户node序号打上标记，记为user_id

2. 011_one_step_fathers_agg.py
该部分主要构造一度关联下的父类特征：
计算用户有多少父亲；
有多少黑产父亲，统计分别有多少逾期，未逾期，以及label为2, 3的父亲，以及他们的占比
用户当儿子时, 他的父亲与他建立联系时的联系人类型的统计 (max, mean, min, std)
用户当儿子时，他的父亲与他建立联系的timestamp统计 (mean, std)
用户当儿子时, 他的父亲用户父亲的原始特征的统计值 (mean, std)

3. 012_one_step_sons_agg.py
该部分主要构造一度关联下儿子的特征：
计算用户有多少儿子；
有多少黑产儿子，统计分别有多少逾期，未逾期，以及label为2, 3的儿子，以及他们的占比
用户当父亲时，与他儿子主动建立联系的联系人类型的统计 (max, mean, min, std)
用户当父亲时，与他儿子主动建立联系的timestamp统计 (mean, std)

4. 021_two_step_son_fathers_agg.py
该部分主要构造二度关联下，有相同儿子的用户(朋友)的特征：
计算用户有多少相同儿子的朋友；
用户有多少黑产朋友，统计分别有多少逾期，未逾期，以及2, 3的朋友，及占比

5. 021_two_step_son_fathers_agg.py
该部分主要构造二度关联下，用户相同爸爸的小伙伴的特征：
计算用户有多少相同爸爸的小伙伴；
用户有多少黑产小伙伴，统计分别有多少逾期，未逾期，以及2, 3的小伙伴儿子，及占比

train.py
拼接用户以上的特征，以及自身的节点特征，自身的node序号 (user_id)，作为最终的模型特征
训练5折的lightgbm模型，并对测试集做出5折平均的预测，生成预测结果。


### 备注
初赛中，我们同时尝试的gnn模型，也为其构造了一些特征，但整体效果与树模型差距较大，在此不再阐述。
复赛中我们会进一步评估gnn在新数据集上的效果。
From_id是父亲，但to_id才是紧急联系人
### 父亲
1. 初始特征：17个特征的std mean（34）
2. 边属性：时间戳min max (last)，edge_type的min max mean std nunique（7→8）
3. 父属性：0,1,2,3,-100，前景个数及占比（12），父亲总个数
4. 修改：2，3，-100，个数及占比（6），父亲节点个数
#### 补充：
4. 筛选时间戳，只看近期关联这个没用，也许效果不行？
5. 朋友/小伙伴的feat可以用没有去用？
### 儿子
1. 边属性：7+时间戳last （8）
2. 子属性：13
### 二度（好朋友/亲兄弟）
1. 朋友属性：13
2. 兄弟属性：13
### 总共
54+21+26+18=119
-24+1-4=92